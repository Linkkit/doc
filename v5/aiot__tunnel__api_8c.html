<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Link Kit C-SDK: device-modules/tunnel/aiot_tunnel_api.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Link Kit C-SDK
   &#160;<span id="projectnumber">5.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>文件列表</span></a></li>
      <li><a href="globals.html"><span>文件成员</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97807256e5481b5817f198b161bc0824.html">device-modules</a></li><li class="navelem"><a class="el" href="dir_f2708ebd992d4e60d8b3e87e4c5e579f.html">tunnel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a> &#124;
<a href="#define-members">宏定义</a> &#124;
<a href="#enum-members">枚举</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">aiot_tunnel_api.c 文件参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;core_stdinc.h&quot;</code><br />
<code>#include &quot;tunnel_buffer_mgr.h&quot;</code><br />
<code>#include &quot;tunnel_proxy_channel.h&quot;</code><br />
<code>#include &quot;tunnel_proxy_protocol.h&quot;</code><br />
<code>#include &quot;tunnel_session_mgr.h&quot;</code><br />
<code>#include &quot;core_log.h&quot;</code><br />
<code>#include &quot;core_os.h&quot;</code><br />
<code>#include &quot;core_adapter.h&quot;</code><br />
<code>#include &quot;<a class="el" href="aiot__tunnel__api_8h_source.html">aiot_tunnel_api.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
aiot_tunnel_api.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c__incl.png" border="0" usemap="#device-modules_2tunnel_2aiot__tunnel__api_8c" alt=""/></div>
<map name="device-modules_2tunnel_2aiot__tunnel__api_8c" id="device-modules_2tunnel_2aiot__tunnel__api_8c">
<area shape="rect" id="node10" href="aiot__tunnel__api_8h.html" title="安全隧道能力连接的功能实现 " alt="" coords="1174,95,1294,121"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structretry__info__t.html">retry_info_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsession__params__t.html">session_params_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structservice__node__t.html">service_node_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structservice__list__t.html">service_list_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structactive__fd__callback__params__t.html">active_fd_callback_params_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:afc3d101f633a076cc1ca84b85b6224b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>&#160;&#160;&#160;&quot;TUNNEL&quot;</td></tr>
<tr class="separator:afc3d101f633a076cc1ca84b85b6224b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6713c27e2745e8e04f7c2983bd1b699"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#ac6713c27e2745e8e04f7c2983bd1b699">DEFAULT_LEN_SERVICE_TYPE</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ac6713c27e2745e8e04f7c2983bd1b699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4ea3018c72856962ea395509e9c102"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#adf4ea3018c72856962ea395509e9c102">DEFAULT_LEN_IP</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:adf4ea3018c72856962ea395509e9c102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7105412e08ff140089ad258b7db01d82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a7105412e08ff140089ad258b7db01d82">DEFAULT_MSG_BUFFER_LEN</a>&#160;&#160;&#160;(5 * 1024)</td></tr>
<tr class="separator:a7105412e08ff140089ad258b7db01d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
枚举</h2></td></tr>
<tr class="memitem:a1593292d885f0b3e19adeb6c0b4c3738"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a1593292d885f0b3e19adeb6c0b4c3738">tunnel_state_t</a> { <a class="el" href="aiot__tunnel__api_8c.html#a1593292d885f0b3e19adeb6c0b4c3738a3910aed43703a9df6044a778589b4938">CLOUD_CHANNEL_CLOSED</a> = 0, 
<a class="el" href="aiot__tunnel__api_8c.html#a1593292d885f0b3e19adeb6c0b4c3738a4e46558fbffd24dbc81ebf30931e31ff">CLOUD_CHANNEL_CONNECTED</a>
 }</td></tr>
<tr class="separator:a1593292d885f0b3e19adeb6c0b4c3738"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a8de02cd8b7a8da6899d74a4320fb2905"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905">tunnel_msg_id</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel)</td></tr>
<tr class="separator:a8de02cd8b7a8da6899d74a4320fb2905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13d3759c481f69f815b3f96aab3af55"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#ac13d3759c481f69f815b3f96aab3af55">aiot_tunnel_init</a> (char *tunnel_id)</td></tr>
<tr class="memdesc:ac13d3759c481f69f815b3f96aab3af55"><td class="mdescLeft">&#160;</td><td class="mdescRight">初始化隧道并设置默认参数  <a href="#ac13d3759c481f69f815b3f96aab3af55">更多...</a><br /></td></tr>
<tr class="separator:ac13d3759c481f69f815b3f96aab3af55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ddfd4d91d9fc4402a92d6f41d7d4b2f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a9ddfd4d91d9fc4402a92d6f41d7d4b2f">aiot_tunnel_set_connect_params</a> (void *tunnel, const <a class="el" href="structaiot__tunnel__connect__param__t.html">aiot_tunnel_connect_param_t</a> *params)</td></tr>
<tr class="memdesc:a9ddfd4d91d9fc4402a92d6f41d7d4b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置隧道的建连参数  <a href="#a9ddfd4d91d9fc4402a92d6f41d7d4b2f">更多...</a><br /></td></tr>
<tr class="separator:a9ddfd4d91d9fc4402a92d6f41d7d4b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47cdd2ff0b39e687aed7cf99bc4d733"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#ab47cdd2ff0b39e687aed7cf99bc4d733">aiot_tunnel_add_proxy_service</a> (void *tunnel, char *proxy_type, const <a class="el" href="structaiot__tunnel__proxy__params__t.html">aiot_tunnel_proxy_params_t</a> *params)</td></tr>
<tr class="memdesc:ab47cdd2ff0b39e687aed7cf99bc4d733"><td class="mdescLeft">&#160;</td><td class="mdescRight">添加本地代理服务的session类型，如ssh、ftp等tcp服务  <a href="#ab47cdd2ff0b39e687aed7cf99bc4d733">更多...</a><br /></td></tr>
<tr class="separator:ab47cdd2ff0b39e687aed7cf99bc4d733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf673a4ff84678ce113192a111538d3a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#adf673a4ff84678ce113192a111538d3a">aiot_tunnel_set_event_callback</a> (void *tunnel, <a class="el" href="aiot__tunnel__api_8h.html#a7a7ef6e8f3577ae5488ba5c8979fc284">aiot_tunnel_event_callback_t</a> callback, void *userdata)</td></tr>
<tr class="memdesc:adf673a4ff84678ce113192a111538d3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置隧道的的事件回调，一般为隧道状态变更时调用  <a href="#adf673a4ff84678ce113192a111538d3a">更多...</a><br /></td></tr>
<tr class="separator:adf673a4ff84678ce113192a111538d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a17e62888e76a95be846a4282abf3e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a66a17e62888e76a95be846a4282abf3e">get_wait_time_period</a> (int retry_times)</td></tr>
<tr class="separator:a66a17e62888e76a95be846a4282abf3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4d1f87bf7e1be39e60be7c1d82833e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#acd4d1f87bf7e1be39e60be7c1d82833e">whether_connect_time_up</a> (<a class="el" href="structretry__info__t.html">retry_info_t</a> *retry_info)</td></tr>
<tr class="separator:acd4d1f87bf7e1be39e60be7c1d82833e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835772f36aeb23502d74048adc4ec6fa"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a835772f36aeb23502d74048adc4ec6fa">_tunnel_connect</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle)</td></tr>
<tr class="separator:a835772f36aeb23502d74048adc4ec6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a919e28514c8cd1bcb34e00a70af25689"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a919e28514c8cd1bcb34e00a70af25689">tunnel_closed_state_process</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle)</td></tr>
<tr class="separator:a919e28514c8cd1bcb34e00a70af25689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1d2212831ad156b58d013b3512e797"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#acc1d2212831ad156b58d013b3512e797">record_active_local_service_sockets</a> (SESSION_INFO_NODE_S *session_info, void *data)</td></tr>
<tr class="separator:acc1d2212831ad156b58d013b3512e797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22198eb3dfeb9895f69e2253ec483d5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structservice__node__t.html">service_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#af22198eb3dfeb9895f69e2253ec483d5">get_service_node</a> (<a class="el" href="structservice__list__t.html">service_list_t</a> *services, <a class="el" href="structsession__params__t.html">session_params_t</a> *session_params)</td></tr>
<tr class="separator:af22198eb3dfeb9895f69e2253ec483d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea9a6308628d25a365a17d6ddec0e58c"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#aea9a6308628d25a365a17d6ddec0e58c">connect2Local_service</a> (char *host_addr, int port)</td></tr>
<tr class="separator:aea9a6308628d25a365a17d6ddec0e58c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7540b0f341ef95ffd61f6d2d74514c29"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a7540b0f341ef95ffd61f6d2d74514c29">new_session</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle, tunnel_cloud_msg_t *head_info)</td></tr>
<tr class="separator:a7540b0f341ef95ffd61f6d2d74514c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616b1a0001ead9d5d72de34d24b97a02"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a616b1a0001ead9d5d72de34d24b97a02">release_session</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle, tunnel_cloud_msg_t *head_info)</td></tr>
<tr class="separator:a616b1a0001ead9d5d72de34d24b97a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f685faee2e77c2dd9c938f081a6999b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a1f685faee2e77c2dd9c938f081a6999b">send_raw_data2Local_service</a> (uint8_t *data, uint32_t len, SESSION_INFO_NODE_S *session_node)</td></tr>
<tr class="separator:a1f685faee2e77c2dd9c938f081a6999b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa968f4b7db912e983edab5499463ceb8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#aa968f4b7db912e983edab5499463ceb8">raw_data</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle, tunnel_cloud_msg_t *head_info)</td></tr>
<tr class="separator:aa968f4b7db912e983edab5499463ceb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713cbf68d788ee2048adefa78762170a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a713cbf68d788ee2048adefa78762170a">cloud_data_proc</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle)</td></tr>
<tr class="separator:a713cbf68d788ee2048adefa78762170a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b7652dadfe5ea2b2f5357e12902b31"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a34b7652dadfe5ea2b2f5357e12902b31">local_service_data_proc</a> (SESSION_INFO_NODE_S *session_info, <a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle)</td></tr>
<tr class="separator:a34b7652dadfe5ea2b2f5357e12902b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab097a08c9b7a1d4f12334ec2b3bc802"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#aab097a08c9b7a1d4f12334ec2b3bc802">tunnel_connected_state_process</a> (<a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *tunnel_handle)</td></tr>
<tr class="separator:aab097a08c9b7a1d4f12334ec2b3bc802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa31b712769eef0d29abe695d83d12871"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#aa31b712769eef0d29abe695d83d12871">process_thread</a> (void *args)</td></tr>
<tr class="separator:aa31b712769eef0d29abe695d83d12871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf972026391ed8de2481032d92009321"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#aaf972026391ed8de2481032d92009321">aiot_tunnel_connect</a> (void *tunnel)</td></tr>
<tr class="memdesc:aaf972026391ed8de2481032d92009321"><td class="mdescLeft">&#160;</td><td class="mdescRight">隧道建连  <a href="#aaf972026391ed8de2481032d92009321">更多...</a><br /></td></tr>
<tr class="separator:aaf972026391ed8de2481032d92009321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f6d2708ef2ddc126c9af71861900e1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#aa5f6d2708ef2ddc126c9af71861900e1">aiot_tunnel_disconnect</a> (void *tunnel)</td></tr>
<tr class="memdesc:aa5f6d2708ef2ddc126c9af71861900e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">隧道断连  <a href="#aa5f6d2708ef2ddc126c9af71861900e1">更多...</a><br /></td></tr>
<tr class="separator:aa5f6d2708ef2ddc126c9af71861900e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d8d0d09200fdc4b86d0aaf5b5f9bca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aiot__tunnel__api_8c.html#a32d8d0d09200fdc4b86d0aaf5b5f9bca">aiot_tunnel_deinit</a> (void **tunnel)</td></tr>
<tr class="memdesc:a32d8d0d09200fdc4b86d0aaf5b5f9bca"><td class="mdescLeft">&#160;</td><td class="mdescRight">删除隧道，回收内存资源  <a href="#a32d8d0d09200fdc4b86d0aaf5b5f9bca">更多...</a><br /></td></tr>
<tr class="separator:a32d8d0d09200fdc4b86d0aaf5b5f9bca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">宏定义说明</h2>
<a class="anchor" id="afc3d101f633a076cc1ca84b85b6224b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TAG&#160;&#160;&#160;&quot;TUNNEL&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac6713c27e2745e8e04f7c2983bd1b699"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LEN_SERVICE_TYPE&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adf4ea3018c72856962ea395509e9c102"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LEN_IP&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7105412e08ff140089ad258b7db01d82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MSG_BUFFER_LEN&#160;&#160;&#160;(5 * 1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">枚举类型说明</h2>
<a class="anchor" id="a1593292d885f0b3e19adeb6c0b4c3738"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="aiot__tunnel__api_8c.html#a1593292d885f0b3e19adeb6c0b4c3738">tunnel_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">枚举值</th></tr><tr><td class="fieldname"><a class="anchor" id="a1593292d885f0b3e19adeb6c0b4c3738a3910aed43703a9df6044a778589b4938"></a>CLOUD_CHANNEL_CLOSED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a1593292d885f0b3e19adeb6c0b4c3738a4e46558fbffd24dbc81ebf30931e31ff"></a>CLOUD_CHANNEL_CONNECTED&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a class="anchor" id="a8de02cd8b7a8da6899d74a4320fb2905"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t tunnel_msg_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac13d3759c481f69f815b3f96aab3af55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* aiot_tunnel_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tunnel_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>初始化隧道并设置默认参数 </p>
<dl class="section return"><dt>返回</dt><dd>void* </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">非NULL</td><td>隧道句柄 </td></tr>
    <tr><td class="paramname">NULL</td><td>初始化失败, 一般是内存分配失败导致 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9ddfd4d91d9fc4402a92d6f41d7d4b2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t aiot_tunnel_set_connect_params </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tunnel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structaiot__tunnel__connect__param__t.html">aiot_tunnel_connect_param_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>设置隧道的建连参数 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tunnel</td><td>隧道的句柄 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>建连的参数，更多说明参考<a class="el" href="structaiot__tunnel__connect__param__t.html">aiot_tunnel_connect_param_t</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>int32_t </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;STATE_SUCCESS</td><td>执行失败, 更多信息请参考<a class="el" href="aiot__state__api_8h.html">aiot_state_api.h</a> </td></tr>
    <tr><td class="paramname">&gt;=STATE_SUCCESS</td><td>执行成功 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab47cdd2ff0b39e687aed7cf99bc4d733"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t aiot_tunnel_add_proxy_service </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tunnel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>proxy_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structaiot__tunnel__proxy__params__t.html">aiot_tunnel_proxy_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>添加本地代理服务的session类型，如ssh、ftp等tcp服务 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tunnel</td><td>隧道的句柄 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">proxy_type</td><td>本地代理服务类型 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>本地代理服务的参数</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>int32_t </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;STATE_SUCCESS</td><td>执行失败, 更多信息请参考<a class="el" href="aiot__state__api_8h.html">aiot_state_api.h</a> </td></tr>
    <tr><td class="paramname">&gt;=STATE_SUCCESS</td><td>执行成功 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adf673a4ff84678ce113192a111538d3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t aiot_tunnel_set_event_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tunnel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="aiot__tunnel__api_8h.html#a7a7ef6e8f3577ae5488ba5c8979fc284">aiot_tunnel_event_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>设置隧道的的事件回调，一般为隧道状态变更时调用 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tunnel</td><td>隧道的句柄 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>回调函数 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">userdata</td><td>用户的上下文指针</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>int32_t </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;STATE_SUCCESS</td><td>执行失败, 更多信息请参考<a class="el" href="aiot__state__api_8h.html">aiot_state_api.h</a> </td></tr>
    <tr><td class="paramname">&gt;=STATE_SUCCESS</td><td>执行成功 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a66a17e62888e76a95be846a4282abf3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_wait_time_period </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>retry_times</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acd4d1f87bf7e1be39e60be7c1d82833e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int whether_connect_time_up </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structretry__info__t.html">retry_info_t</a> *&#160;</td>
          <td class="paramname"><em>retry_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_acd4d1f87bf7e1be39e60be7c1d82833e_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_acd4d1f87bf7e1be39e60be7c1d82833e_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_acd4d1f87bf7e1be39e60be7c1d82833e_cgraph" id="aiot__tunnel__api_8c_acd4d1f87bf7e1be39e60be7c1d82833e_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#a66a17e62888e76a95be846a4282abf3e" title="get_wait_time_period" alt="" coords="228,5,373,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a835772f36aeb23502d74048adc4ec6fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t _tunnel_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a919e28514c8cd1bcb34e00a70af25689"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tunnel_closed_state_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_a919e28514c8cd1bcb34e00a70af25689_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_a919e28514c8cd1bcb34e00a70af25689_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_a919e28514c8cd1bcb34e00a70af25689_cgraph" id="aiot__tunnel__api_8c_a919e28514c8cd1bcb34e00a70af25689_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#acd4d1f87bf7e1be39e60be7c1d82833e" title="whether_connect_time_up" alt="" coords="192,5,367,32"/>
<area shape="rect" id="node4" href="aiot__tunnel__api_8c.html#a835772f36aeb23502d74048adc4ec6fa" title="_tunnel_connect" alt="" coords="221,56,338,83"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#a66a17e62888e76a95be846a4282abf3e" title="get_wait_time_period" alt="" coords="415,5,560,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acc1d2212831ad156b58d013b3512e797"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int record_active_local_service_sockets </td>
          <td>(</td>
          <td class="paramtype">SESSION_INFO_NODE_S *&#160;</td>
          <td class="paramname"><em>session_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af22198eb3dfeb9895f69e2253ec483d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structservice__node__t.html">service_node_t</a>* get_service_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structservice__list__t.html">service_list_t</a> *&#160;</td>
          <td class="paramname"><em>services</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsession__params__t.html">session_params_t</a> *&#160;</td>
          <td class="paramname"><em>session_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aea9a6308628d25a365a17d6ddec0e58c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* connect2Local_service </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>host_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7540b0f341ef95ffd61f6d2d74514c29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void new_session </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tunnel_cloud_msg_t *&#160;</td>
          <td class="paramname"><em>head_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_a7540b0f341ef95ffd61f6d2d74514c29_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_a7540b0f341ef95ffd61f6d2d74514c29_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_a7540b0f341ef95ffd61f6d2d74514c29_cgraph" id="aiot__tunnel__api_8c_a7540b0f341ef95ffd61f6d2d74514c29_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#af22198eb3dfeb9895f69e2253ec483d5" title="get_service_node" alt="" coords="167,5,291,32"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#aea9a6308628d25a365a17d6ddec0e58c" title="connect2Local_service" alt="" coords="152,56,307,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a616b1a0001ead9d5d72de34d24b97a02"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void release_session </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tunnel_cloud_msg_t *&#160;</td>
          <td class="paramname"><em>head_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1f685faee2e77c2dd9c938f081a6999b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_raw_data2Local_service </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SESSION_INFO_NODE_S *&#160;</td>
          <td class="paramname"><em>session_node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa968f4b7db912e983edab5499463ceb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void raw_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tunnel_cloud_msg_t *&#160;</td>
          <td class="paramname"><em>head_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_aa968f4b7db912e983edab5499463ceb8_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_aa968f4b7db912e983edab5499463ceb8_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_aa968f4b7db912e983edab5499463ceb8_cgraph" id="aiot__tunnel__api_8c_aa968f4b7db912e983edab5499463ceb8_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#a1f685faee2e77c2dd9c938f081a6999b" title="send_raw_data2Local\l_service" alt="" coords="128,5,276,47"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905" title="tunnel_msg_id" alt="" coords="149,71,255,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a713cbf68d788ee2048adefa78762170a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cloud_data_proc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_a713cbf68d788ee2048adefa78762170a_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_a713cbf68d788ee2048adefa78762170a_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_a713cbf68d788ee2048adefa78762170a_cgraph" id="aiot__tunnel__api_8c_a713cbf68d788ee2048adefa78762170a_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#a7540b0f341ef95ffd61f6d2d74514c29" title="new_session" alt="" coords="179,35,278,61"/>
<area shape="rect" id="node5" href="aiot__tunnel__api_8c.html#a616b1a0001ead9d5d72de34d24b97a02" title="release_session" alt="" coords="171,85,287,112"/>
<area shape="rect" id="node6" href="aiot__tunnel__api_8c.html#aa968f4b7db912e983edab5499463ceb8" title="raw_data" alt="" coords="191,136,266,163"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#af22198eb3dfeb9895f69e2253ec483d5" title="get_service_node" alt="" coords="350,5,474,32"/>
<area shape="rect" id="node4" href="aiot__tunnel__api_8c.html#aea9a6308628d25a365a17d6ddec0e58c" title="connect2Local_service" alt="" coords="335,56,489,83"/>
<area shape="rect" id="node7" href="aiot__tunnel__api_8c.html#a1f685faee2e77c2dd9c938f081a6999b" title="send_raw_data2Local\l_service" alt="" coords="338,118,486,159"/>
<area shape="rect" id="node8" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905" title="tunnel_msg_id" alt="" coords="359,184,465,211"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a34b7652dadfe5ea2b2f5357e12902b31"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int local_service_data_proc </td>
          <td>(</td>
          <td class="paramtype">SESSION_INFO_NODE_S *&#160;</td>
          <td class="paramname"><em>session_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_a34b7652dadfe5ea2b2f5357e12902b31_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_a34b7652dadfe5ea2b2f5357e12902b31_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_a34b7652dadfe5ea2b2f5357e12902b31_cgraph" id="aiot__tunnel__api_8c_a34b7652dadfe5ea2b2f5357e12902b31_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905" title="tunnel_msg_id" alt="" coords="216,5,323,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aab097a08c9b7a1d4f12334ec2b3bc802"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tunnel_connected_state_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtunnel__handle__t.html">tunnel_handle_t</a> *&#160;</td>
          <td class="paramname"><em>tunnel_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_aab097a08c9b7a1d4f12334ec2b3bc802_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_aab097a08c9b7a1d4f12334ec2b3bc802_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_aab097a08c9b7a1d4f12334ec2b3bc802_cgraph" id="aiot__tunnel__api_8c_aab097a08c9b7a1d4f12334ec2b3bc802_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#acc1d2212831ad156b58d013b3512e797" title="record_active_local\l_service_sockets" alt="" coords="227,5,362,47"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#a34b7652dadfe5ea2b2f5357e12902b31" title="local_service_data_proc" alt="" coords="213,71,376,98"/>
<area shape="rect" id="node5" href="aiot__tunnel__api_8c.html#a713cbf68d788ee2048adefa78762170a" title="cloud_data_proc" alt="" coords="236,151,353,178"/>
<area shape="rect" id="node4" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905" title="tunnel_msg_id" alt="" coords="612,53,719,79"/>
<area shape="rect" id="node6" href="aiot__tunnel__api_8c.html#a7540b0f341ef95ffd61f6d2d74514c29" title="new_session" alt="" coords="433,166,531,193"/>
<area shape="rect" id="node9" href="aiot__tunnel__api_8c.html#a616b1a0001ead9d5d72de34d24b97a02" title="release_session" alt="" coords="424,217,540,243"/>
<area shape="rect" id="node10" href="aiot__tunnel__api_8c.html#aa968f4b7db912e983edab5499463ceb8" title="raw_data" alt="" coords="445,111,519,138"/>
<area shape="rect" id="node7" href="aiot__tunnel__api_8c.html#af22198eb3dfeb9895f69e2253ec483d5" title="get_service_node" alt="" coords="603,221,727,247"/>
<area shape="rect" id="node8" href="aiot__tunnel__api_8c.html#aea9a6308628d25a365a17d6ddec0e58c" title="connect2Local_service" alt="" coords="588,170,743,197"/>
<area shape="rect" id="node11" href="aiot__tunnel__api_8c.html#a1f685faee2e77c2dd9c938f081a6999b" title="send_raw_data2Local\l_service" alt="" coords="591,104,739,145"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa31b712769eef0d29abe695d83d12871"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* process_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_aa31b712769eef0d29abe695d83d12871_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_aa31b712769eef0d29abe695d83d12871_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_aa31b712769eef0d29abe695d83d12871_cgraph" id="aiot__tunnel__api_8c_aa31b712769eef0d29abe695d83d12871_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#a919e28514c8cd1bcb34e00a70af25689" title="tunnel_closed_state\l_process" alt="" coords="175,49,313,90"/>
<area shape="rect" id="node6" href="aiot__tunnel__api_8c.html#aab097a08c9b7a1d4f12334ec2b3bc802" title="tunnel_connected_state\l_process" alt="" coords="164,133,324,174"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#acd4d1f87bf7e1be39e60be7c1d82833e" title="whether_connect_time_up" alt="" coords="372,56,547,83"/>
<area shape="rect" id="node5" href="aiot__tunnel__api_8c.html#a835772f36aeb23502d74048adc4ec6fa" title="_tunnel_connect" alt="" coords="401,5,518,32"/>
<area shape="rect" id="node4" href="aiot__tunnel__api_8c.html#a66a17e62888e76a95be846a4282abf3e" title="get_wait_time_period" alt="" coords="603,56,749,83"/>
<area shape="rect" id="node7" href="aiot__tunnel__api_8c.html#acc1d2212831ad156b58d013b3512e797" title="record_active_local\l_service_sockets" alt="" coords="392,209,527,250"/>
<area shape="rect" id="node8" href="aiot__tunnel__api_8c.html#a34b7652dadfe5ea2b2f5357e12902b31" title="local_service_data_proc" alt="" coords="595,107,757,133"/>
<area shape="rect" id="node10" href="aiot__tunnel__api_8c.html#a713cbf68d788ee2048adefa78762170a" title="cloud_data_proc" alt="" coords="401,157,518,184"/>
<area shape="rect" id="node9" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905" title="tunnel_msg_id" alt="" coords="829,127,936,153"/>
<area shape="rect" id="node11" href="aiot__tunnel__api_8c.html#a7540b0f341ef95ffd61f6d2d74514c29" title="new_session" alt="" coords="627,263,725,289"/>
<area shape="rect" id="node14" href="aiot__tunnel__api_8c.html#a616b1a0001ead9d5d72de34d24b97a02" title="release_session" alt="" coords="618,157,734,184"/>
<area shape="rect" id="node15" href="aiot__tunnel__api_8c.html#aa968f4b7db912e983edab5499463ceb8" title="raw_data" alt="" coords="639,208,713,235"/>
<area shape="rect" id="node12" href="aiot__tunnel__api_8c.html#af22198eb3dfeb9895f69e2253ec483d5" title="get_service_node" alt="" coords="821,313,945,340"/>
<area shape="rect" id="node13" href="aiot__tunnel__api_8c.html#aea9a6308628d25a365a17d6ddec0e58c" title="connect2Local_service" alt="" coords="805,263,960,289"/>
<area shape="rect" id="node16" href="aiot__tunnel__api_8c.html#a1f685faee2e77c2dd9c938f081a6999b" title="send_raw_data2Local\l_service" alt="" coords="809,197,957,238"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaf972026391ed8de2481032d92009321"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t aiot_tunnel_connect </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tunnel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>隧道建连 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tunnel</td><td>隧道的句柄</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>int32_t </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;STATE_SUCCESS</td><td>执行失败, 更多信息请参考<a class="el" href="aiot__state__api_8h.html">aiot_state_api.h</a> </td></tr>
    <tr><td class="paramname">&gt;=STATE_SUCCESS</td><td>执行成功 </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="aiot__tunnel__api_8c_aaf972026391ed8de2481032d92009321_cgraph.png" border="0" usemap="#aiot__tunnel__api_8c_aaf972026391ed8de2481032d92009321_cgraph" alt=""/></div>
<map name="aiot__tunnel__api_8c_aaf972026391ed8de2481032d92009321_cgraph" id="aiot__tunnel__api_8c_aaf972026391ed8de2481032d92009321_cgraph">
<area shape="rect" id="node2" href="aiot__tunnel__api_8c.html#a835772f36aeb23502d74048adc4ec6fa" title="_tunnel_connect" alt="" coords="587,5,705,32"/>
<area shape="rect" id="node3" href="aiot__tunnel__api_8c.html#aa31b712769eef0d29abe695d83d12871" title="process_thread" alt="" coords="192,63,303,89"/>
<area shape="rect" id="node4" href="aiot__tunnel__api_8c.html#a919e28514c8cd1bcb34e00a70af25689" title="tunnel_closed_state\l_process" alt="" coords="361,55,500,97"/>
<area shape="rect" id="node7" href="aiot__tunnel__api_8c.html#aab097a08c9b7a1d4f12334ec2b3bc802" title="tunnel_connected_state\l_process" alt="" coords="351,146,511,187"/>
<area shape="rect" id="node5" href="aiot__tunnel__api_8c.html#acd4d1f87bf7e1be39e60be7c1d82833e" title="whether_connect_time_up" alt="" coords="559,60,733,87"/>
<area shape="rect" id="node6" href="aiot__tunnel__api_8c.html#a66a17e62888e76a95be846a4282abf3e" title="get_wait_time_period" alt="" coords="790,60,935,87"/>
<area shape="rect" id="node8" href="aiot__tunnel__api_8c.html#acc1d2212831ad156b58d013b3512e797" title="record_active_local\l_service_sockets" alt="" coords="579,111,713,153"/>
<area shape="rect" id="node9" href="aiot__tunnel__api_8c.html#a34b7652dadfe5ea2b2f5357e12902b31" title="local_service_data_proc" alt="" coords="781,115,944,141"/>
<area shape="rect" id="node11" href="aiot__tunnel__api_8c.html#a713cbf68d788ee2048adefa78762170a" title="cloud_data_proc" alt="" coords="587,229,705,256"/>
<area shape="rect" id="node10" href="aiot__tunnel__api_8c.html#a8de02cd8b7a8da6899d74a4320fb2905" title="tunnel_msg_id" alt="" coords="1016,113,1123,140"/>
<area shape="rect" id="node12" href="aiot__tunnel__api_8c.html#a7540b0f341ef95ffd61f6d2d74514c29" title="new_session" alt="" coords="813,231,912,257"/>
<area shape="rect" id="node15" href="aiot__tunnel__api_8c.html#a616b1a0001ead9d5d72de34d24b97a02" title="release_session" alt="" coords="805,281,921,308"/>
<area shape="rect" id="node16" href="aiot__tunnel__api_8c.html#aa968f4b7db912e983edab5499463ceb8" title="raw_data" alt="" coords="825,172,900,199"/>
<area shape="rect" id="node13" href="aiot__tunnel__api_8c.html#af22198eb3dfeb9895f69e2253ec483d5" title="get_service_node" alt="" coords="1007,231,1131,257"/>
<area shape="rect" id="node14" href="aiot__tunnel__api_8c.html#aea9a6308628d25a365a17d6ddec0e58c" title="connect2Local_service" alt="" coords="992,281,1147,308"/>
<area shape="rect" id="node17" href="aiot__tunnel__api_8c.html#a1f685faee2e77c2dd9c938f081a6999b" title="send_raw_data2Local\l_service" alt="" coords="995,165,1143,206"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa5f6d2708ef2ddc126c9af71861900e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t aiot_tunnel_disconnect </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tunnel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>隧道断连 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tunnel</td><td>隧道的句柄</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>int32_t </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;STATE_SUCCESS</td><td>执行失败, 更多信息请参考<a class="el" href="aiot__state__api_8h.html">aiot_state_api.h</a> </td></tr>
    <tr><td class="paramname">&gt;=STATE_SUCCESS</td><td>执行成功 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a32d8d0d09200fdc4b86d0aaf5b5f9bca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aiot_tunnel_deinit </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>tunnel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>删除隧道，回收内存资源 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tunnel</td><td>隧道的句柄的指针</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>int32_t </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;STATE_SUCCESS</td><td>执行失败, 更多信息请参考<a class="el" href="aiot__state__api_8h.html">aiot_state_api.h</a> </td></tr>
    <tr><td class="paramname">&gt;=STATE_SUCCESS</td><td>执行成功 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
